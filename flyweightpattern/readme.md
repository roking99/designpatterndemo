#结构型设计模式-享元模式

模式简介
    
         通过共享的方式有效的支持大量细粒度对象（小对象）的复用。系统只使用少量的对象，而这些对象都很相似，状态变化很小，
     可以实现对象的多次复用。用于享元模式只适用于共享对象都是细粒度的对象，因此又被称为轻量级模式。

设计理念
     
     通过共享的方式解决大量细粒度对象的复用。
     
享元模式的两个关键概念：
      
      1、内部状态（内部数据）：存储在享元对象内部，并且不会随环境改变而改变，内部状态（内部数据）是可以共享的。
      
      2、外部状态（外部数据）：随环境更改而更改，不能共享的。享元对象的外部状态通常由客户端保存，并在享元对象被创建之后，
      需要使用的时候再传入到享元对象内部。一个外部状态与另一个外部状态之间是相互独立的。

相关角色
    
        1、抽象享元类：通常是抽象类或接口，定义了享元类共有的方法。具体享元类可以通过这些方法向外提供享元对象的内部数据，
    也可 以通过这些方法设置外部数据
    
        2、具体享元类：实现类抽象享元类定义的方法，在具体享元类内部提供了空间来存储享元类的内部状态。通常结合单例模式来
    设计享元类，为每一个享元类提供唯一的享元对象。
    
        3、非共享具体享元类：并非所有抽象享元类的子类都需要被共享。不能被共享的享元类设计成非共享具体享元类。在需要一个
    非共享享元对象时，直接创建其实例就可以了。
    
        4、享元工厂类：用于创建和管理享元对象，针对抽象享元类编程。提供一个“享元池”，存储具体的享元对象，享元池一般设
    计为一个存储“键值对”的集合（也可以是其他类型的集合） ，可以结合工厂模式进行设计；当用户请求一个具体享元对象时，
    享元工厂提供一个存储在享元池中已创建的实例或者创建一个新的实例（如果不存在的话） ，返回新创建的实例并将其存储在享元
    池中。
    
优劣分析
    
    优势
        1、可以极大的减少对象的数量，相同或相似的对象只存一份，从而节约系统资源，提高系统性能
        2、享元模式的外部状态相对独立，而且不会影响其内部状态，从而使得享元对象可以在不同的环境中被共享。
        
    劣势
        1、享元模式使系统变得复杂，特别是分离出内部状态和外部状态后，程序的逻辑也会更加复杂
        2、为了使得对象可以共享，享元模式需要将享元对象的部分状态外部化，而读取外部状态将使得运行时间变长
        
适用场景
        
       1、一个系统有大量相同或者相似的对象，造成内存的大量耗费。
       2、 对象的大部分状态都可以外部化，可以将这些外部状态传入对象中。
       3、在使用享元模式时需要维护一个存储享元对象的享元池，而这需要耗费一定的系统资源，因此，应当在需要多次重复使用享元
       对象时才值得使用享元模式
       
demo介绍

           某软件公司欲开发一个多功能文档编辑器，在文本文档中可以插入图片、动画、视频等多媒体资料，为了节约系统资源，相
       同的图片、动画和视频在同一个文档中只需保存一份，但是可以多次重复出现，而且它们每次出现时位置和大小均可不同。使用
       享元模式设计该文档编辑器。

结构图